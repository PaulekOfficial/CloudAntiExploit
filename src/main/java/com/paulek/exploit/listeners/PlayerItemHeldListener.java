package com.paulek.exploit.listeners;

import com.paulek.exploit.data.SimplePackets;
import org.bukkit.Material;
import org.bukkit.craftbukkit.v1_8_R3.inventory.CraftItemStack;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.player.PlayerItemHeldEvent;
import org.bukkit.inventory.ItemStack;


public class PlayerItemHeldListener implements Listener {

    @EventHandler
    private void onItem(PlayerItemHeldEvent e){

        if(e.getPlayer().getInventory().getItemInHand().getType().equals(Material.MONSTER_EGG)){

            ItemStack is = e.getPlayer().getItemInHand();

            net.minecraft.server.v1_8_R3.ItemStack nms_is = CraftItemStack.asNMSCopy(is);

            if(nms_is.getTag().getCompound("EntityTag").hasKey("Size") && (nms_is.getTag().getCompound("EntityTag").getInt("Size") >= SimplePackets.getEntityTagSize())){

                e.getPlayer().setItemInHand(null);

            }

            if(nms_is.getTag().getCompound("EntityTag").hasKey("Pos")){

                e.getPlayer().setItemInHand(null);

            }

        }

    }
}
