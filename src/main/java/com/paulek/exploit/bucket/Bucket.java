package com.paulek.exploit.bucket;

public class Bucket {

    private double current_volume = 0;

    private double last_updated;

    private double max_volume;

    private double outflow;

    public Bucket(int max_volume, int outflow){

        this.max_volume = max_volume;

        this.outflow = outflow;

    }

    public boolean add(int v) {
        double now = System.currentTimeMillis();

        if(last_updated != 0) {

            current_volume = current_volume - (outflow * ((now - last_updated) / 1000));

            if (current_volume < 0) current_volume = 0;

        }

        current_volume += v;

        last_updated = now;

        return current_volume > max_volume;

    }

}
