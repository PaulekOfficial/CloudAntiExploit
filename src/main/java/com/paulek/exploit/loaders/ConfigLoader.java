package com.paulek.exploit.loaders;

import com.paulek.exploit.Antiexploit;
import com.paulek.exploit.data.SimplePackets;
import com.paulek.exploit.data.Packet;
import org.bukkit.configuration.ConfigurationSection;
import org.bukkit.plugin.Plugin;

public class ConfigLoader {

    private Plugin p = Antiexploit.getPlugin();


    public ConfigLoader(){

        ConfigurationSection c = p.getConfig().getConfigurationSection("blocedpackets");


        for(String s : c.getKeys(false)){

            ConfigurationSection cs = c.getConfigurationSection(s);

            for(String conf : cs.getKeys(false)){

                boolean cancel = cs.getBoolean("cancel");
                int limit = cs.getInt("limit");
                int normal = cs.getInt("normal");

                SimplePackets.getPackets().put(s, new Packet(s, cancel, limit, normal));

            }

            p.getLogger().info("Loaded " + s + " packet!");

        }

        ConfigurationSection cs = p.getConfig().getConfigurationSection("settings");

        for(String s : cs.getKeys(false)){

            SimplePackets.setMax_ip(cs.getInt("maxAccountsPerIp"));

            SimplePackets.setPerm(cs.getBoolean("instantPerm"));

            SimplePackets.setGlobalPacketLimit(cs.getInt("globalPacketLimit"));

            SimplePackets.setNormalPacketsSend(cs.getInt("normalPacketsSend"));

        }

        ConfigurationSection cse = p.getConfig().getConfigurationSection("nbt");

        for(String s : cse.getKeys(false)){

            SimplePackets.setEntityTagSize(cse.getInt("EntityTagSize"));

        }

        ConfigurationSection csec = p.getConfig().getConfigurationSection("messages");

        for(String s : csec.getKeys(false)){

            SimplePackets.setKick_message(csec.getString("kick"));
            SimplePackets.setToo_mutch_ip(csec.getString("tooMuchIp"));
            SimplePackets.setWdl_detected(csec.getString("wdlDetected"));
            SimplePackets.setReload(csec.getString("reload"));

        }

        SimplePackets.setPenalty(p.getConfig().getStringList("penalty"));

    }
}
